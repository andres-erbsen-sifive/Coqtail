# Coqtail

[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)
[![Build Status](https://travis-ci.com/whonore/Coqtail.svg?branch=master)](https://travis-ci.com/whonore/Coqtail)

## Interactive Coq Proofs in Vim

Coqtail enables interactive Coq proof development in Vim similar to
[CoqIDE](https://coq.inria.fr/refman/practical-tools/coqide.html)
or [ProofGeneral](https://proofgeneral.github.io/).

It supports:
- Coq 8.4 - 8.9
- Having multiple Coq buffers open
- Python 2 and 3

Installation and Requirements
-----------------------------
Using
[pathogen](https://github.com/tpope/vim-pathogen):

    cd ~/.vim/bundle && git clone https://github.com/whonore/coqtail.git

Using
[Vundle](https://github.com/VundleVim/Vundle.vim):

    Plugin 'whonore/coqtail' (in .vimrc)
    :PluginInstall

Using
[VimPlug](https://github.com/junegunn/vim-plug):

    Plug 'whonore/coqtail' (in .vimrc)
    :PlugInstall

Coqtail requires:
- Vim compiled with either `+python` or `+python3`
- [vimbufsync](https://github.com/let-def/vimbufsync)
- [Coq 8.4](https://coq.inria.fr/coq-84),
  [8.5](https://coq.inria.fr/coq-85),
  [8.6](https://coq.inria.fr/coq-86),
  [8.7](https://coq.inria.fr/coq-87),
  [8.8](https://github.com/coq/coq/releases/tag/V8.8.1), or
  [8.9](https://github.com/coq/coq/releases/tag/V8.9.0)

If you are using pathogen, documentation can be generated by
`:call pathogen#helptags()`. Alternatively, you can do `:helptags
{path-to-coqtail}/doc`.

Usage
-----
Coqtail provides the following commands (see `:help coqtail` for more detail):
- `CoqStart` (`<leader>cc`) - Launch Coq
- `CoqStop` (`<leader>cq`) - Quit Coq
- `CoqNext` (`<leader>cj`) - Submit the next sentence to Coq for checking
- `CoqUndo` (`<leader>ck`) - Step back one sentence
- `CoqToCursor` (`<leader>cl`) - Submit all sentences up to the cursor
- `CoqToTop` (`<leader>cT`) - Rewind to the beginning of the file
- `Coq <arg>` - Send arbitrary commands to Coq (such as `Check`, `About`, `Print`,
  etc)
  + `<arg>=SearchAbout` (`<leader>cs`) - Search for theorems about the Coq term
    under the cursor
  + `<arg>=Check` (`<leader>ch`) - Check the type of the Coq term under the
    cursor
  + `<arg>=About` (`<leader>ca`) - Print information about the Coq term under
    the cursor
  + `<arg>=Print` (`<leader>cp`) - Print the definition of the Coq term under
    the cursor
  + `<arg>=Locate` (`<leader>cf`) - Find where the Coq term under the cursor was
    defined
- `JumpToEnd` (`<leader>cG`) - Move the cursor to the end of the checked region
- `FindDef` (`<leader>co`) - Search the `LoadPath` for the definition of the Coq
  term under the cursor and open it in another buffer if possible
- `MakeMatch` (`<leader>cm`) - Insert a `match` template for a given `Inductive`
  type at the cursor location
- `ToggleDebug` (`<leader>cd`) - Toggle logging of debug messages to a file (off
  by default)

The mappings shown above are set by default by `coqtail#Mapping()`, but you can
disable these and define your own by setting `g:coqtail_nomap = 1` in your
.vimrc.

Coqtail also comes with an ftdetect script for Coq, as well as modified
versions of Vincent Aravantinos'
[syntax](http://www.vim.org/scripts/script.php?script_id=2063) and
[index](http://www.vim.org/scripts/script.php?script_id=2079) scripts for Coq.
These scripts are used by default but can be disabled by setting
`g:coqtail_nosyntax = 1` and `g:coqtail_noindent = 1` respectively.

Thanks
------
Parts of Coqtail were originally inspired by/adapted from
[Coquille](https://github.com/the-lambda-church/coquille)
(MIT License, Copyright (c) 2013, Thomas Refis).
